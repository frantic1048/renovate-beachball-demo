"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.bumpMinSemverRange = void 0;
const semver_1 = __importDefault(require("semver"));
function bumpMinSemverRange(minVersion, semverRange) {
    if (semverRange === '*') {
        return semverRange;
    }
    if (['workspace:*', 'workspace:~', 'workspace:^'].includes(semverRange)) {
        // For basic workspace ranges we can just preserve current value and replace during publish
        // https://pnpm.io/workspaces#workspace-protocol-workspace
        return semverRange;
    }
    if (semverRange[0] === '~' || semverRange[0] === '^') {
        // ~1.0.0
        // ^1.0.0
        return semverRange[0] + minVersion;
    }
    if (semverRange.startsWith('workspace:~') || semverRange.startsWith('workspace:^')) {
        // workspace:~1.0.0
        // workspace:^1.0.0
        return `workspace:${semverRange[10]}${minVersion}`;
    }
    if (semverRange.includes('>')) {
        // Less frequently used, but we treat any of these kinds of ranges to be within a minor band for now:
        // more complex understanding of the semver range utility is needed to do more
        // >=1.0.0 <2.0.0
        return `>=${minVersion} <${semver_1.default.inc(minVersion, 'major')}`;
    }
    if (semverRange.includes(' - ')) {
        // 1.0.0 - 2.0.0
        return `${minVersion} - ${semver_1.default.inc(minVersion, 'major')}`;
    }
    return minVersion;
}
exports.bumpMinSemverRange = bumpMinSemverRange;
//# sourceMappingURL=bumpMinSemverRange.js.map